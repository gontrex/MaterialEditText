plugins {
  id 'com.android.library'
  id 'maven-publish'
}

android {
  namespace 'com.rengwuxian.materialedittext'
  compileSdk = Integer.parseInt(project.ANDROID_BUILD_SDK_VERSION)

  defaultConfig {
    minSdkVersion 23
    targetSdk = Integer.parseInt(project.ANDROID_BUILD_TARGET_SDK_VERSION)

    testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
  }

  buildTypes {
    release {
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_17
    targetCompatibility JavaVersion.VERSION_17
  }

}

dependencies {
  implementation 'androidx.annotation:annotation:1.9.1'
  implementation 'androidx.appcompat:appcompat:1.7.1'
  // com.nineoldandroids eliminado: animaciones ya incluidas en AppCompat

  androidTestImplementation 'androidx.test.ext:junit:1.2.1'
  androidTestImplementation 'androidx.test:core:1.6.1'
  androidTestImplementation 'androidx.test:runner:1.6.2'
}

publishing {
  publications {
    release(MavenPublication) {
      groupId = project.GROUP
      artifactId = project.ID
      version = project.VERSION_NAME

      artifact("$buildDir/outputs/aar/${project.name}-release.aar")

      pom {
        name.set(project.ID)
        description.set(project.POM_DESCRIPTION)
        url.set(project.POM_URL)
        licenses {
          license {
            name.set(project.POM_LICENCE_NAME)
            url.set(project.POM_LICENCE_URL)
          }
        }
        developers {
          developer {
            id.set(project.POM_DEVELOPER_ID)
            name.set(project.POM_DEVELOPER_NAME)
          }
        }
        scm {
          connection.set(project.POM_SCM_CONNECTION)
          developerConnection.set(project.POM_SCM_DEV_CONNECTION)
          url.set(project.POM_URL)
        }
      }
    }
  }
}

tasks.withType(PublishToMavenLocal).configureEach {
  dependsOn tasks.named("bundleReleaseAar")
}

